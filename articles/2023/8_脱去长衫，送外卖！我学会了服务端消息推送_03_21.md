[![ppUirI1.md.jpg](https://s1.ax1x.com/2023/03/21/ppUirI1.md.jpg)](https://imgse.com/i/ppUirI1)

> 面试官：我们平常的网页都是前端发消息，后端响应。后端可以主动发消息给前端吗？
我：emmm.....
面试官：感谢参加面试，如果有后续流程会通知你。
~~由于没拿到offer，于是我“脱去长衫”，去送外卖。


# 1. 短轮询(short polling
>第一天送外卖。没经验，于是我**每隔5分钟**就去商家问一下有没有订单要送，结果白跑了很多趟。于是我把时间间隔拉长到**每小时去一次**，结果错过了好多订单。

原理：在前端以固定的时间间隔向服务器查询是否有新的数据更新
优点：服务器部署和迁移都很简单。
缺点：如果定时器设置的时间过短会导致大量无用请求，服务器压力大。
    如果定时器设置时间过长，则不能有效地获取最新数据。
🌰适合的场景：抖音抢购

# 2. Long polling
>第二天送外卖。吸取了上次的经验，这回我不来回跑了，我**来到商家店里我直接把椅子坐下来**，不给我订单我不走了。

原理：前端发起请求，后端不急着回应，而是等到有需要再回应。前端在收到回应时再重新发起请求。
优点：
缺点：

🌰适合的场景：现在的网页版微信用的就是这种方式。

# 3. SSE
>第三天送外卖。我来到店里，店老板掏出一个神奇的
商家嫌弃我坐他店里影响店面形象，于是和我商量好，**他一有订单就给我打电话**，我再赶过来接单。

当服务器向前端声明接下来要发送流信息时，前端就会保持连接打开
底层是基于长链接来实现的。
server send event

<!-- SSE 更加简单易用，但是它只支持单向数据传输，不能进行双向通信。 -->

# 4. Web socket协议
>第四天送外卖。我发现了一个叫饿**的蓝色软件！

https://www.zhihu.com/question/20215561
通俗来说，你可以用HTTP协议传输非Html数据，就是这样=。=

<!-- SSE 全双工。 -->

# 5. webrtc协议
>第五天送外卖。我发现了一个*团的黄色软件！

在单个tcp连接上家里全双工通信的协议。
替代http协议

# 6. Http2 webpush（未成标准
>之前的店老板又找到我，说他们店开发了一种新模式，邀请我去看看。

https://web.dev/push-notifications-web-push-protocol/


后端消息推送（SSE，Server-Sent Events）


>Notice：本文没有任何歧视外卖员的意思。我们相信任何凭借自己的劳动为社会做出贡献的人都值得我们的尊重和感激。



10.1.1.1 80 

应用层 网络层 